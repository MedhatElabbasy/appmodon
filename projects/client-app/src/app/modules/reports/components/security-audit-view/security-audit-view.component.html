<div class="position-relative header">
    <div class="bg-primary fixed-top w-100">
        <app-navbar>

        </app-navbar>
    </div>
</div>
<div class="h-100 bg-info-o  py-5">
    <div class="container py-5 mt-5">
        <div class="row mt-4">
            <div class="container h-100 d-flex flex-column py-4">
                <div class="mb-3">
                    <h4 class="m-0 fw-600 my-3" translate="">نموذج تدقيق الأمن الجديد مع الاشراف</h4>
                    <div class="d-flex justify-content-end align-items-center gap-3 mb-3">
                        <div>
                          <button (click)="createNewRequest()" class="btn myPadding rounded-m rounded-8 btn btn-primary  d-flex gap-2 "
                            type="button">
                            {{ "reports.add_new_form" | translate }}
                          </button>
                        </div>
                      </div>
                    <div class="card border-0 flex-fill rounded-10">
                        <div class="card-body">
                            <div class="h-100 d-flex flex-column">
                                <!-- <div class="row">
                                    <div class="col-6">-->
                                      <div class="row ">
                                        <div class="col-6">
                                          <div class="input-group">
                                          <span class="input-group-text border-0 bg-transparent" id="search">
                                            <ion-icon name="search"></ion-icon>
                                          </span>
                                          <input type="text" class="form-control" [placeholder]="'search' | translate" aria-label="search"
                                             aria-describedby="search" [(ngModel)]="searchKey" (keyup)="search()"/>
                                            </div>
                                        </div>
                                      </div>
                                    <!--</div>
                                    <div class="col-6">
                                      <div class="d-flex justify-content-end gap-3 mb-3">
                                        <div class="form-floating mb-3 col-md-4" *ngIf="filter">
                                          <input type="email" class="form-control bg-info-o" id="input1" placeholder="date" bsDatepicker
                                            [maxDate]="maxDate" [formControl]="date" [bsConfig]="{
                                            containerClass: 'theme-red',
                                            isAnimated: true,
                                            showWeekNumbers: false,
                                            adaptivePosition: true
                                          }" />
                                          <label for="input1" translate="date_range"></label>
                                        </div>
                          
                                        <div class="form-floating " *ngIf="data">
                                          <p-dropdown class="py-2" id="data" [filter]="true" filterBy="name" styleClass="w-100"
                                            [optionLabel]="'clientCompany.name'" optionValue="id" [options]="data"
                                            [placeholder]="'validation.select_client'|translate" (onChange)="displayFilter($event)"></p-dropdown>
                                        </div>
                                        <div class="dropdown menue2">
                                          <button
                                            class="btn myPadding rounded-m rounded-8 btn-primary  d-flex gap-2 align-items-center  dropdown-toggle "
                                            type="button" id="dropdownMenuButton2" data-bs-toggle="dropdown" aria-expanded="false">
                                            <i class="fa-solid fa-sliders"></i>
                                            {{ "filtration" | translate }}
                                          </button>
                                          <ul class="dropdown-menu " aria-labelledby="dropdownMenuButton2">
                                            <li class="dropdown-item cursor-pointer text-align-center" (click)="getDataFilter('date')">{{"date"
                                              |translate}}</li>
                                            <li class="dropdown-item cursor-pointer text-align-center" (click)="getDataFilter('client')">
                                              {{"client"
                                              |translate}}</li>
                                          </ul>
                                        </div>
                                        <div>
                                          <button (click)="deleteFilter()"
                                            class="btn myPadding rounded-m rounded-8 btn btn-secondary  d-flex gap-2 " type="button">
                                            {{ "filtrationDelete" | translate }}
                                          </button>
                                        </div>
                                      </div>
                                    </div>
                                  </div> -->
                                  <div class="table-responsive flex-fill text-primary" id="excel-table">
                                    <table class="table table-striped table-borderless">
                                      <thead>
                                        <tr>
                                          <th scope="col" translate="reports.employee_name"></th>
                                          <th scope="col" translate="reports.date"></th>
                                          <th scope="col" translate="reports.industrial_city"></th>
                                          <th scope="col" translate="reports.observation"></th>
                                          <th scope="col" translate="reports.recommendations"></th>
                                          <th scope="col"></th>
                                        </tr>
                                      </thead>
                                      <tbody>
                                        <ng-container>
                                          <tr class="c-pointer" *ngFor="
                                          let audit of securityAudit  | paginate
                                              : {
                                                  itemsPerPage: pageSize,
                                                  currentPage: pageNumber,
                      
                                                  id: 'audit'
                                                }
                                        ">
                                            <td class="text-nowrap">
                                             {{audit.employeeName}}
                                            </td>
                                            <td>{{audit.visitDate?.split(" ")[0]}}</td>
                                            <td>{{audit.industrialCity}}</td>
                                            <td *ngIf="audit?.observation">
                                              <div *ngFor="let part of getTextParts(audit?.observation)">
                                                {{ part }}
                                                <br>
                                              </div>
                                            </td>
                                            <td *ngIf="audit?.recommendations">
                                              <div *ngFor="let part of getTextParts(audit.recommendations)">
                                              {{ part }}
                                              <br>
                                            </div></td>
                                            <td>
                                              <div class="d-flex justify-content-end">
                                                <!-- <button *ngIf="accident.gallery.length" translate="show" type="button"
                                                          class="btn btn-warning px-4 text-white rounded-10"
                                                          (click)="openGallery(accident.gallery)"></button> -->
                                                <!-- <img (click)="download()" class="mx-2 cursor-pointer scale py-2"
                                                  src="assets/images/svgs/Path 2998.svg" alt="" srcset="">
                                                <img (click)="openModal()" class="mx-2 cursor-pointer scale py-2"
                                                  src="assets/images/svgs/Path 250.svg" alt="" srcset=""> -->
                                              </div>
                                            </td>
                          
                                          </tr>
                                        </ng-container>
                          
                                        <tr *ngIf="!securityAudit?.length">
                                            <td colspan="13">
                                              <h6 class="text-align-center fw-500 text-danger" translate="no_data_to_show"></h6>
                                            </td>
                                          </tr>
                                      </tbody>
                                    </table>
                                  </div>
                          
                                  <hr />
                                  <div class="d-flex flex-wrap align-items-center justify-content-between gap-3">
                                    <div class="text-info d-flex gap-3 align-items-center">
                                      <label class="fw-500" translate="for_page"></label>
                                      <div>
                                        <select class="form-select" (change)="onPageSizeChange($event)">
                                          <option *ngFor="let size of sizes" [selected]="size == pageSize">
                                            {{ size }}
                                          </option>
                                        </select>
                                      </div>
                                    </div>
                          
                                    <pagination-controls id="audit" (pageChange)="onPageNumberChange($event)"
                                      (pageBoundsCorrection)="onPageNumberChange($event)" [responsive]="true" [previousLabel]="''"
                                      [nextLabel]="''" screenReaderPaginationLabel="Pagination" screenReaderPageLabel="page"
                                      screenReaderCurrentLabel="You're on page">
                                    </pagination-controls>
                                  </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>